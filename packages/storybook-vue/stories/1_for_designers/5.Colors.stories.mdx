import { Meta, Description, DocsContainer } from '@storybook/addon-docs/blocks';
import index from '../color_table.json';

import text_en from './5.Colors_en.md';
import text_de from './5.Colors_de.md';

<Meta
  title="Scale for Designers/Colors"
  parameters={{
    docs: {
      container: ({ context }) => {
        const tinycolor = require('tinycolor2');
        const locale = context && context.globals && context.globals.locale;
        let newSection = false;
        let newSubsection = false;
        let pathStringItem;
        let currentpathSection;
        let currentSection;
        function getItemPathByPath(path) {
          for (let i = 0; i < 100; i++) {
            if (index.tokens[i].pathString === path) {
              if (index.tokens[i].path[3]) {
                return (
                  index.tokens[i].path[2] + ' / ' + index.tokens[i].path[3]
                );
              }
              return index.tokens[i].path[2];
            }
          }
        }
        function getItemColorByPath(path) {
          for (let i = 0; i < 100; i++) {
            if (index.tokens[i].pathString === path) {
              return index.tokens[i].value;
            }
          }
        }
        function isNewSection(jsonPosition) {
          if (jsonPosition !== 0) {
            if (
              index.tokens[jsonPosition - 1].section !==
              index.tokens[jsonPosition].section
            ) {
              newSection = true;
              currentSection = index.tokens[jsonPosition].section;
            } else {
              newSection = false;
            }
          } else {
            newSection = true;
            currentSection = index.tokens[jsonPosition].section;
          }
        }
        function hasNewSubsection(item) {
          if (item == currentpathSection) {
            newSubsection = false;
          } else {
            currentpathSection = item;
            newSubsection = true;
          }
        }
        function isReadable(firstColor, secondColor) {
          if (
            tinycolor.isReadable(firstColor, secondColor, {
              level: 'AAA',
              size: 'small',
            })
          ) {
            return ' (AAA)';
          }
          if (
            tinycolor.isReadable(firstColor, secondColor, {
              level: 'AA',
              size: 'small',
            })
          ) {
            return ' (AA)';
          }
          return '';
        }
        return (
          <DocsContainer context={context}>
            <table>
              {index.tokens
                .filter((item) => item.category == 'Color')
                .map((item, i) => {
                  isNewSection(i);
                  return (
                    <div>
                      {newSection ? (
                        <h1 style={{ marginTop: '100px' }}>{item.section}</h1>
                      ) : null}
                      {index.tokens
                        .filter((item) => item.contrastChecks)
                        .map((item, i) => {
                          hasNewSubsection(item.section);
                          pathStringItem = item.contrastChecks;
                          return currentSection == item.section &&
                            newSection ? (
                            <table style={{}}>
                              {newSubsection ? (
                                <thead>
                                  <tr>
                                    <th
                                      style={{
                                        textAlign: 'left',
                                        color: '#6A6A6A',
                                        fontSize: '13px',
                                      }}
                                    >
                                      Example
                                    </th>
                                    <th
                                      style={{
                                        textAlign: 'left',
                                        color: '#6A6A6A',
                                        fontSize: '13px',
                                      }}
                                    >
                                      Color
                                    </th>
                                    <th
                                      style={{
                                        textAlign: 'left',
                                        color: '#6A6A6A',
                                        fontSize: '13px',
                                      }}
                                    >
                                      Description
                                    </th>
                                    <th
                                      style={{
                                        textAlign: 'left',
                                        color: '#6A6A6A',
                                        fontSize: '13px',
                                      }}
                                    >
                                      Token
                                    </th>
                                  </tr>
                                </thead>
                              ) : null}
                              <tbody>
                                <tr style={{ height: '1px' }}>
                                  <td
                                    style={{
                                      width: '200px',
                                      border: 'none',
                                      height: 'inherit',
                                    }}
                                  >
                                    <div
                                      style={{
                                        height: '95%',
                                        marginTop: '10px',
                                        display: 'flex',
                                        width: '200px',
                                        borderRadius: '2px',
                                        backgroundColor: `${item.value}`,
                                        fontSize: '8px',
                                        border: '1px solid #f0f1f1',
                                        borderRadius: '4px',
                                      }}
                                    ></div>
                                  </td>
                                  <td
                                    style={{
                                      width: '300px',
                                      border: 'none',
                                      height: 'inherit',
                                      verticalAlign: 'top',
                                    }}
                                  >
                                    <div
                                      style={{
                                        backgroundColor: `${item.value}`,
                                        padding: '20px',
                                        marginTop: '10px',
                                        border: '1px solid #f0f1f1',
                                        borderRadius: '4px',
                                      }}
                                    >
                                      {pathStringItem.map((path) => {
                                        return (
                                          <div
                                            style={{
                                              backgroundColor: `${item.value}`,
                                              width: '200px',
                                            }}
                                          >
                                            <a href={`#${path}`}>
                                              <div
                                                style={{
                                                  textTransform: 'capitalize',
                                                  fontWeight: '500',
                                                  color: `${getItemColorByPath(
                                                    path
                                                  )}`,
                                                }}
                                              >
                                                {getItemPathByPath(path) +
                                                  isReadable(
                                                    `${getItemColorByPath(
                                                      path
                                                    )}`,
                                                    `${item.value}`
                                                  )}
                                              </div>
                                            </a>
                                          </div>
                                        );
                                      })}
                                    </div>
                                  </td>
                                  <td
                                    style={{
                                      width: '450px',
                                      border: 'none',
                                      verticalAlign: 'top',
                                    }}
                                  >
                                    <div
                                      style={{
                                        fontWeight: 'bolder',
                                        fontSize: '20px',
                                        textTransform: 'capitalize',
                                        padding: '15px 15px 5px 15px',
                                      }}
                                    >
                                      {item.name}
                                    </div>
                                    <div
                                      style={{
                                        padding: '0 15px 15px 15px',
                                      }}
                                    >
                                      {item.comment}
                                    </div>
                                  </td>
                                  <td
                                    style={{
                                      border: 'none',
                                      verticalAlign: 'top',
                                    }}
                                  >
                                    <div
                                      style={{
                                        width: '400px',
                                        padding: '10px 0 0 0',
                                      }}
                                    >
                                      <div
                                        style={{
                                          fontWeight: 'bold',
                                          fontSize: '12px',
                                        }}
                                      >
                                        //js
                                      </div>
                                      <div
                                        style={{
                                          backgroundColor: '#D9DBDE',
                                          marginTop: '5px',
                                          lineHeight: '50px',
                                          borderRadius: '4px',
                                        }}
                                      >
                                        <div
                                          style={{
                                            marginLeft: '20px',
                                            fontSize: '12px',
                                            fontWeight: 'bold',
                                            color: 'hsla(0, 0%, 0%, 0.65)',
                                          }}
                                        >
                                          {item.jsPathName}
                                        </div>
                                      </div>
                                      <div
                                        style={{
                                          fontWeight: 'bold',
                                          fontSize: '12px',
                                          marginTop: '20px',
                                        }}
                                      >
                                        //css
                                      </div>
                                      <div
                                        style={{
                                          backgroundColor: '#D9DBDE',
                                          position: 'relative',
                                          lineHeight: '50px',
                                          borderRadius: '4px',
                                          fontSize: '12px',
                                        }}
                                      >
                                        <div
                                          style={{
                                            marginLeft: '20px',
                                            fontSize: '12px',
                                            fontWeight: 'bold',
                                            color: 'hsla(0, 0%, 0%, 0.65)',
                                          }}
                                        >
                                          {item.cssVariableName}
                                        </div>
                                        <button
                                          style={{
                                            position: 'absolute',
                                            padding: '4px',
                                            top: '8px',
                                            right: '8px',
                                          }}
                                          onClick={() => {
                                            navigator.clipboard.writeText(
                                              item.cssVariableName
                                            );
                                          }}
                                        >
                                          <scale-icon-action-copy-paste
                                            accessibility-title="copy-paste"
                                            size="20"
                                          />
                                        </button>
                                      </div>
                                    </div>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          ) : null;
                        })}
                      {newSection ? (
                        <thead>
                          <tr>
                            <th
                              style={{
                                textAlign: 'left',
                                color: '#6A6A6A',
                                fontSize: '13px',
                              }}
                            >
                              Value
                            </th>
                            <th
                              style={{
                                textAlign: 'left',
                                color: '#6A6A6A',
                                fontSize: '13px',
                              }}
                            >
                              Comment
                            </th>
                            <th
                              style={{
                                textAlign: 'left',
                                color: '#6A6A6A',
                                fontSize: '13px',
                              }}
                            >
                              CSS-Variable Name
                            </th>
                          </tr>
                        </thead>
                      ) : null}
                      <tbody>
                        <td>
                          <tr style={{ height: '150px' }}>
                            <div
                              style={{
                                width: '400px',
                                marginTop: '7px',
                                marginBottom: '7px',
                              }}
                            >
                              <div
                                style={{
                                  height: '100px',
                                  width: '350px',
                                  backgroundColor: `${item.value}`,
                                  border: '1px solid #f0f1f1',
                                  marginBottom: '10px',
                                  fontSize: '8px',
                                  borderRadius: '4px',
                                }}
                              ></div>
                              <span
                                style={{
                                  fontSize: '14px',
                                }}
                              >
                                {item.value}
                              </span>
                            </div>
                          </tr>
                        </td>
                        <td>
                          <tr style={{ height: '150px' }}>
                            <div
                              style={{
                                marginRight: '100px',
                                marginTop: '7px',
                                marginBottom: '7px',
                              }}
                            >
                              <div
                                style={{
                                  width: '400px',
                                }}
                              >
                                <span style={{ fontWeight: 'bold' }}>
                                  {item.name}
                                </span>
                              </div>
                              <div>
                                <span>{item.comment}</span>
                              </div>
                            </div>
                          </tr>
                        </td>
                        <td style={{ width: '600px' }}>
                          <tr style={{ height: '150px' }}>
                            <div
                              style={{
                                marginTop: '10px',
                                width: '450px',
                                height: '50px',
                                backgroundColor: '#D9DBDE',
                                textAlign: 'start',
                                position: 'relative',
                              }}
                            >
                              <span
                                style={{
                                  fontSize: '12px',
                                  lineHeight: '50px',
                                  padding: '30px',
                                }}
                                id={item.pathString}
                              >
                                {item.cssVariableName}
                              </span>
                              <button
                                style={{
                                  position: 'absolute',
                                  padding: '4px',
                                  top: '5px',
                                  right: '5px',
                                }}
                                onClick={() => {
                                  navigator.clipboard.writeText(
                                    item.cssVariableName
                                  );
                                }}
                              >
                                <scale-icon-action-copy-paste accessibility-title="copy-paste" />
                              </button>
                            </div>
                          </tr>
                        </td>
                      </tbody>
                    </div>
                  );
                })}
            </table>
          </DocsContainer>
        );
      },
    },
  }}
/>
